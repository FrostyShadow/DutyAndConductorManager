@model IEnumerable<ISSK_2_0.Models.Conductor>

@functions {
    private string Tak;
}

@{
    ViewBag.Title = "Lista konduktorów";
}

<div class="jumbotron">
    <h2>@ViewBag.Title</h2>
    @if (User.IsInRole("Moderator") || User.IsInRole("Administrator"))
    {
        <p>
            <a href="@Url.Action("Create", "Account")" class="btn btn-success">
                <i class="fa fa-plus"></i>
                <span>
                    Nowy konduktor
                </span>
            </a>
        </p>
    }
    <table class="table table-striped table-responsive">
        <thead class="thead-dark">
        <tr>
            <th scope="col">
                @Html.DisplayNameFor(m => m.Code)
            </th>
            <th scope="col">
                @Html.DisplayNameFor(m => m.ConductorData.FirstName)
            </th>
            <th scope="col">
                @Html.DisplayNameFor(m => m.ConductorData.MiddleName)
            </th>
            <th scope="col">
                @Html.DisplayNameFor(m => m.ConductorData.LastName)
            </th>
            <th scope="col">
                @Html.DisplayNameFor(m => m.Email)
            </th>
            <th scope="col">
                @Html.DisplayNameFor(m => m.ConductorData.PhoneNumber)
            </th>
            <th scope="col">
                @Html.DisplayNameFor(m => m.ConductorData.City)
            </th>

            @if (HttpContext.Current.User.IsInRole("Moderator, Administrator"))
            {
                <th scope="col"></th>
            }

        </tr>
        </thead>
        
        <tbody>
        @if (Model != null)
        {
            foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(i => item.Code)
                    </td>
                    <td>
                        @Html.DisplayFor(i => item.ConductorData.FirstName)
                    </td>
                    <td>
                        @Html.DisplayFor(i => item.ConductorData.MiddleName)
                    </td>
                    <td>
                        @Html.DisplayFor(i => item.ConductorData.LastName)
                    </td>
                    <td>
                        @Html.DisplayFor(i => item.Email)
                    </td>
                    <td>
                        @Html.DisplayFor(i => item.ConductorData.PhoneNumber)
                    </td>
                    <td>
                        @Html.DisplayFor(i => item.ConductorData.City)
                    </td>
                     
                    
                    <td>
                        <a href="@Url.Action("UserDetails", "Account", new {@id = item.ConductorId})" class="btn btn-primary">
                            <i class="fa fa-info-circle"></i>
                        </a>
                        @if (HttpContext.Current.User.IsInRole("Moderator, Administrator"))
                        {
                            <a href="@Url.Action("EditUser", "Account", new {@id = item.ConductorId})" class="btn btn-warning">
                                <i class="fa fa-edit"></i>
                            </a>
                            <a href="@Url.Action("DeleteUser", "Account", new {@id = item.ConductorId})" class="btn btn-danger @(HttpContext.Current.User.Identity.Name.Equals(item.Email) ? "disabled" : "")">
                                <i class="fa fa-trash"></i>
                            </a>
                        }
                    </td>
                </tr>
            }
        }
        </tbody>
    </table>

    @if(Model == null)
    {
        <h3 class="text-info text-center">Brak utworzonych kont konduktorów.</h3>
    }
</div>